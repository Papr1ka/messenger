from Socket import Socket
import asyncio
from socket import gethostname, gethostbyname
from datetime import datetime

class Server(Socket):
    last_messages = []
    nicks = {}
    users = []
    def __init__(self):
        super(Server, self).__init__()
        print("the server is listening")
        self.nicks = {}
        self.last_messages = []
        self.limit = 50
        self.hello_message = "Welcome to Messanger, you see the last 100 posts\n".encode('utf-8')

    def set_up(self):
        self.socket.bind((self.last_ip, self.last_port))
        print(gethostbyname(gethostname()))
        self.socket.listen()
        self.socket.setblocking(False)
        self.socket.settimeout(0)
    
    async def listen_socket(self, listened_socked = None):
        if not listened_socked:
            return
        while True:
            try:
                data = await self.mainloop.sock_recv(listened_socked, self.packages)
                print(data.decode('utf-8'))
                if "Sc_adress" in data.decode('utf-8'):
                    if data.decode('utf-8')[9:] not in self.nicks.values():
                        self.nicks[listened_socked] = data.decode('utf-8')[9:]
                        await self.mainloop.sock_sendall(listened_socked, self.hello_message)
                        for i in self.last_messages:
                            await self.mainloop.sock_sendall(listened_socked, i.encode('utf-8'))
                        print(f"send last messages : {len(self.last_messages)}")
                        mesg = Message(" has joined the chat".encode('utf-8'), self.nicks[listened_socked]).getPretty()
                        await self.send_data(mesg.encode('utf-8'))
                        await self.logging(mesg)
                    else:
                        listened_socked.send("такой ник уже существует".encode('utf-8'))
                        self.users.remove(listened_socked)
                        return
                else:
                    try:
                        msg = Message(data, self.nicks[listened_socked])
                        if 'sex:1' in data.decode('utf-8'):
                            msg = msg.sexy(1)
                        elif 'sex:2' in data.decode('utf-8'):
                            msg = msg.sexy(2)
                        elif 'sex:3' in data.decode('utf-8'):
                            msg = msg.sexy(3)
                        elif 'sex:4' in data.decode('utf-8'):
                            msg = msg.sexy(4)
                        elif 'miha' in data.decode('utf-8'):
                            msg = msg.sexy(5)
                        else:
                            msg = msg.getPretty()
                        await self.logging(msg)
                        print(f"user send {msg}")
                        await self.send_data(msg.encode('utf-8'))
                    except KeyError:
                        print("not user message")
            except ConnectionResetError:
                print("User disconnect")
                self.users.remove(listened_socked)
                try:
                    mesg = Message(" has leaved the chat".encode('utf-8'), self.nicks[listened_socked]).getPretty()
                except KeyError:
                    pass
                await self.send_data(mesg.encode('utf-8'))
                await self.logging(mesg)
                try:
                    self.nicks.pop(listened_socked)
                except:
                    pass
                return

    async def logging(self, data):
        if len(self.last_messages) >= self.limit:
            self.last_messages.remove(self.last_messages[0])
        self.last_messages.append(data)

    async def send_data(self, data):
        for user in self.users:
            await self.mainloop.sock_sendall(user, data)
    
    async def accept_sockets(self):
        while True:
            user_socket, adress = await self.mainloop.sock_accept(self.socket)
            print(f"User {adress} connected")
            self.users.append(user_socket)
            self.mainloop.create_task(self.listen_socket(user_socket))

    async def main(self):
        await self.mainloop.create_task(self.accept_sockets())

class Message():
    sex = [
        "\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(%@@@@@@@,@@%(@@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@@*. ,##*.@** %**(* *%  *@ .*# *%% /&# (@/.#&,*%% /#,*/**,#@,,/%**%#**@(**@/*/&**##**@(**@/*/&**#%**@(**@/*/&**#%**&#**@/@&#@#&#&#@%%#&&#%%##&###@###&##&&#%%@#&#&#@%%#&%(/(%%#*(/(##/@,@@% @@#,@@/(@@,&@% @@#,@@((@@,&@& @@#.@@((@@*&@& @@%.@@((@@@@@@@@@@*@@##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&/((//###/#(**/@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*@***%   @ . # **@*,#@*.@%* @(**************#%#%###/((/(#/(#(/.,,. *., * ,.* .,,. *., * ,.* .,,. *., * ,.* .,,. *., * ,.@,#@%@##&#&#@%%@.,##/ %*#.& /*@%%#&&#%%@#&#&##/*##%#(/(##*//(#(#(%/#/@/#*&(#/##(%/#/@/#*&(#/##(%/#/@/#*&(#/#((#/#/&/#*&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(/(#%%%%%(*(/(/*,@@%(@@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@,(@#,,,,,@,,,%,,**,.# , @ , #.,(,,//,,(*,,#,,,/%((%%%%#((((#/(, ,(, (*, &,. &, ,(, (*, &,. &, .#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@%(*@(#(@*(%@%@@&&@@%@@@#@@*#%*%%%%%%%%%%%%(#((%/#/@/#*&(#(#((%/#/@/#*&(#/#((%/#/@/#/&(#/#((#/#/&/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@((%%(*##(((((//*/(@@%(@@/@@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,(@%,,,,,@,,,%,,**,.# , @ , #.,(,,//,,(,,,#*/%%%##((//////(((,. ,(, (*, &,. &, ,(, (*, &,. &, .#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@&(*@#((@/(%@%@@&&@@%@@@*/*,///**//**//*,*//*/(%/#/@/#/&(#(#((%/#/@/#/&/#(#((%/#/@/#/&/#/#((%/#/&/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#/,,*//((((((((((((((((((((((((((/*/#@@.@@@,@@%(@@&(#(**#@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,/( %%,/(,,%,,,,  ,.. , , , ,./*/(((((((((((((((((((((((((((((((((((/**,,*/.,,  ,.******** ,,  ,, .,, ,,. ,,  ,, .,, ,,.(%%(#* %%@(&(&((@@(%@@((/**//(((((///((((//*******,,/*********/(*****//**,***,**&&&#/**,,,,//*,%#((@(((@((#%((%#((@(((@(@**@@@@@@@@@@@@@@@@&**/(((((((((((((**((*,*****,,***,,*****,,**,****,**,***,****,*%(***,,//,,**,#@/&@@.@@@,@@%(@@/&@@.@@,// %%,/(,,%,,,, *,*////((((((((((((/**(/,***/(((*,**,,***(((/,**,**((,,,***,*******/**/**,** (#% .,. ,,. ,,  ,, .,. ,,.(%%(#* %%@(&(&(//(&&&&&&&(*/((((((((/**((,,**,/((/,***.***,*/****,*******,***,********(/**,*,((%#((@(((@((#%((%#((@(((@(@**&@@@@@@@@@/,%&&&&&&&&&&&&(,(((((/**,/(*,***********,,,********,,******,***,,*******,.,,**/&%(@&/&@&.@@&,@@%(@&/&@&,@@,// %%,//,,/.#%%#%%%&&&&&&&&&&%,/(/***,(((*,,,,,,,,,,*((//((((((((((((((**,****,,,,,,,****(,,  ,, .,. .,. ,,  ,, .,. .,.(%%(#* #%@*,**/#*****(**,*#&&&&&(,*****(((((((((((((((((((((((((((((((**/((((/*******,*(((/(#((%#((@(((@((#%((%#((@(((@(@**&@@@@%,//(///**(###(***,**,(&&&***,/(((((((((((((((((((((((((/%%%((%%%%%%%%%%%#.#%%%%%%%#(&%(@&/&@&,@@&,@&%(@&/&@&,@@,// %%,/&/.*%&%%%%%%%(*,/((#/****&%,,((((((((((((((((((((((((((//%%%#,%%%%%#####((#*%%%%%%##/% ,, .,. .,  ,,  ,, .,. ., (##(#* ##@#*#%%%%%%%%%%%%%%(**((*,,/(((*((/*/(//***/((((((((((/.(%%(#(#/**///(##%#/,(%%%%%##//(%(((@(((&((#%((%#((@(((@(@@@&@@@@@@.*#%%%%%%%%%%%%%%%%%%%*./((((((/(((((((((((((((((((((/,...,%%%&%%%%%%##//*#%%%####*&&@@&@@@&@@@&@@&&@@&@@@&@@@.**.#. **..*#%%%%%%%%%%%%%%%%%%%%/*((((((/**//**,/(((((((((((((((/***.,*/((((((####/%%#####*(@.(,& &*( &#*.(&.(*& &*( &#((&((& ((@(/*##%%%%%%%%%%%%%%%%%%%%//((((((((((((((((((((((((((//****,(%%%%%%%%%##((#####/,%%@@@(@@@#@@&%@@%@@@(@@@#@@@%@&&@@@&&&@,@(,##%%%%%%%%%%%%%%%%%%%%%#%%%#./(((((((((((((((((/*****,,,*##((#%%###*####(,*%@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # ,,*###%%%%%%%%%%%%%%%%%%%%%%%&/*/(((((((((((((/******,,**,*,*********,..(* &#,,(&.(,& &*( &#,.(&.(,& &*( &(((&(/& ((@(((&(&(*(###%%%%%%%%%%%%%%%%%%%%%%%(,,,,,,,,,,,,,,,,,,,,**,***,***,,****.***,,/%@@%@@@(@@@#@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// (,*##########%%%%%%%%%%%%#(,/(//************,,*****,,*****//,,,,*/,,**(@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ...,#,/############%%%/////////////////,.,**.,,***,,*,,,,/##%%%%#**( &#,,(&.(,& &*( &#,.(&.(,& &*( &(//&//& //@///&//@#/#@(/&%*##############(*#%%(///****/,,,,**,***,,,**,/%%%(/(/(%&%%#&/%@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@.**//*###/######(,#%%&%%(,***##**%#//*(*,.,,(#%&&&%/(/%%%%%(#(&@@@&@@@@@@&@@@&@@@&@@@@@@@@@@&@@.**.#  **. #   ... ... ..  ..**&%#**(#(/,,(/(#%%&&&%/,((/*,,*/******,(((%%%###%%%%##%#( &#,,(&.(,& &*( &(,.(&.(,& &*( &(//&//& //@///&//@#/#@//&@//@&*,*(/***##(/*/(//##%%%%%%%%&%#(%%(%%%%%%%((*/#%%%%%//*(*#@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@&&&@,@&#(@// %%.,/@.#,&**,,*/##%%%#%%%%#/(###%%%%%%%####**#%%%/###,,,,,**/**(&@@@&@@@&@@@@@@&@@@&@@@&@@@@@@&@@@&@@.**.#  **. #   ... ... ..  ./#%%%%(,.,,,,,,*%%##**/((#######/#%###&#(##(#%/,,,@ (,% &*( &#,,(&.(,& &*( &(,.(&.(,& &,( &(//&//& //@///&//@#/#@//%@/#/**,,,,,,,,,,,,,,,,//&((*/**/*/####(((%/(%(%%%*#,,*@@@(@@@(@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#(@// %%,,/@./.,,,,,,,,,,,,,,,,,,,* @#**(/****#((*%%*/##/##/*#/,,,/%@@&@@@&@@@&@@@&@@&@@@&@@@&@@@&@@&@@@&@@.**.#  **. #   ... ... .. /,,,,,,,,,,,,,,,,,,,** *#*,/(######/%%,,(,,,,,,,//(,,,,.* &*( &(,,(& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%@/%*,,,,,,,,,,,,,,,,,%(#//#,****/%@%*%%(,,,,,,,,,,*##(,,,,,,%**@&%@@#@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,,/@./*,,,,,,,,,,,,,,.*,@@@ @@/,*///*((%%(.,,,,,,,,,,,,*((,,,,,,,*%@@@&@@@&@@&@@@&@@@&@@@&@@&@@@&@@.** #  **  #             /,,,,,,,,,,,,,,,,,*, @/ *@.****/#&/#((@(,,...,,,,,,,,,(*,,,,*, %(.,(& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//(,,,,,,,,,,,,,,,,,,,,*/(#//%///@////#*&#@@@/#(((&%#(//***(###(((//%@@#@@@(@@@(@@&%@@#@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,,%,,,,,,,,,,,,,,,,,,,,/@@@ @@@,@@#(#%#(%@@@&@@&@@@%@@@&@@@&&&#(*%%@@@&@@@&@@&@@@%@@@&@@@&@@&@@@%@@ ** #  **  #             /,,,,.,,,,,,,,,,,,,(.@/ *@./,//(###,#/@ (.% @*/ %#.,/& (.% &,/ %(.,/& (.& &,( &(,.(& (,& &,( &(//%//& //@///&//@#/(@//%@//%*,,,,,,,,,**((/&//(#//%*,//(///(@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%\n",
        "\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%//&@/(@@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@@*. ,##*.@** %**(* *%  *@ .*# *%% /&# (@/.#&,*%% /&# (@/.#@,,/////(%#(#,*@/*/&**##**@(**@/*/&**#%**@(**@/*/&**#%**&#**@/@&#@#&#&#@%%#&&#%%##&###@###&##&&#%%@#&#&#@%%#&&#%%@#&#&#@##%%#(######%%#####,&@% @@#,@@((@@,&@& @@#.@@((@@*&@& @@%.@@((@@@@@@@@@@*@@##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#(#%###%&##(%%%((%##(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*@***%   @ . # **@*,#@*.@%* @(****************************((##((&%##%&%#(##(*.,,. *., * ,.* .,,. *., * ,.* .,,. *., * ,.@,#@%@##&#&#@%%@.,##/ %*#.& /*@%%#&&#%%@#&#&#@%%#&&#%%@#&#@%#*##%%&%%%&&&%##/##(%/#/@/#*&(#/##(%/#/@/#*&(#/#((#/#/&/#*&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.#%#%&&&&&&&##(,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@,(@#,,,,,@,,,%,,**,.# , @ , #.,(,,//,,(*,,#,,,(,,*/,,(*,,#,, &%&%%%%%&&&&%%&#/ ,(, (*, &,. &, .#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@%(*@(#(@*(%@%@@&&@@%@@@#@@@%@@&&@@%@@@#@@#%&&&&&&&&&&&&%%&%#(%/#/@/#*&(#/#((%/#/@/#/&(#/#((#/#/&/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%###&&&&&&&&&&&&%%&&&&#%@@/&@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,(@%,,,,,@,,,%,,**,.# , @ , #.,(,,//,,(,,,#,,,(,,*%(#%&&&&&%%&&%%####%%&&&&&&&&&&#/(*, &,. &, .#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@&(*@#((@/(%@%@@&&@@%@@@#@&##%&&%%&&%%%&&&&&&&&&&&&&&&&&&&&&&&&&%##/#/&/#(#((%/#/@/#/&/#/#((%/#/&/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&/%&&%#&&&&&&&&&&%%&&&&&&&&&&&&&&&&&&&&&&&&&#%.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,/( %%,/(,,%,,,,  ,.. , , , ..,(%,*/@,(.(%&%#&&&&&&&&&&&&&&&&&&&&&&&&&&&%%%%&&&&&&&&&&&#(  ,,  ,, .,, ,,. ,,  ,, .,, ,,.(%%(#* %%@(&(&((@@(%@@(&@&(@@%(%@#(&@(((&%#&&&&&&&&&&&&&%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%*#%((&#((@(((@((#%((%#((@(((@(@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&(%%%##%&&&&&&&&%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%(&%(@@/&@@.@@@,@@%(@@/&@@.@@,// %%,/(,,%,,,,  ,.. , , , ..,(%,*/@,(#(%%##%&&&&&&&#%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&#(,, .,. ,,. ,,  ,, .,. ,,.(%%(#* %%@(&(&((@@(%@@(&@&(@@%(#@((&@((@(%&&&&%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&%%&&&&&&&&&&&&&&&&%%#((@(((@((#%((%#((@(((@(@**&@@@@@@@@@@@@@@@@@&@@@@@&@@@@@@@@@@@@#&&&&&&&&&%&&&%#&&&&&&&&&&##%&&&&&&#&&&&&&&&&&&&&&&&&&&#@&/&@&.@@&,@@%(@&/&@&,@@,// %%,//,,%,,,,  ,.. , , , ..,#%,**(%%%%%%%&&&&&&%#%%&&%#%%#%&#&%%##(%%%#%&&&&&&&&&&&&&&&&&&&&#, .,. .,. ,,  ,, .,. .,.(%%(#* #%@(&(&((@@(#@@(&@&(@@%(#%(#%#(/*/#&%%&&&&%&&&&%%&&%%&&&&&&&&&&&&&&%%%%&&&&&&&&&&&&&&&&#%#((@(((@((#%((%#((@(((@(@**&@@@@@@@@@@@@@@@@@&@@@@@&@@@%#////**//**/#&%%#&&&&%#&%%&&%#&&&%&&&&&&&&&&&&&%&&&&&&&&&&&&&(%(@&/&@&,@@&,@&%(@&/&@&,@@,// %%,//,,%,,,,  ,.. , , , .*///*****//***/**(%%#&&&%%&&(#%&&&%&&&%%&&&&&&&&&&&%&&&&&&&&&&%(  ,, .,. .,  ,,  ,, .,. ., (##(#* ##@(&(&((@@(#@@(%((#/**#(#%#(/##(/*//***/(&%%%%%##(&&&#%&&&&&&&&&&&&&&&&&&%&&&&&&&&(%%((%(((@(((&((#%((%#((@(((@(@@@&@@@@@@*@@%#@**.## **@./****//##%%%##%##/#/*(#((%%##%&&%#%&&&&%#&&&%%&&&&&&&&&&&&&&&&##&@@&&@@&@@@&@@@&@@&&@@&@@@&@@@.**.#. **. # . ... ... ....&(/**/(///((%###%%#//***/%&&&&&&%%&&%#&&&&&&&&&&&&&&&&&&&&&#/&#,,(&.(,& &*( &#*.(&.(*& &*( &#((&((& ((@(((&((@#(#@((&@((@&(((/*//(/*****/(((/*/###%&&&&&&&%%%&&&&&&%&&&&&%&&&&&&%(%@@&%@@%@@@(@@@#@@&%@@%@@@(@@@#@@@%@&&@@@&&&@,@&#(@*/ %#.,/@ #.% @(#%%%%%##(#%%#(%%#%%#%%%&&&&&&&&&%#%&%#(#((&#(#####&&@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ... ...... .&(%%%%%%%%%%##&&%%%#%%#%%%&&&&%%&&&&#,@*( %#,,(@.(,& &*( &#,,(&.(,& &*( &#,.(&.(,& &*( &(((&(/& ((@(((&((@#(#@((&@((@&((((#%%##%%%%%#%(#%%#(#%%%%####&&&&&&&&#%#@@&%@@%@@@(@@@#@@&%@@%@@@(@@@#@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@ #.% @@@(((%((###(%%%#%%%%%%%%%%%%#%&&&&&&&&&(&&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ... ... .. .@/ /@&(#%%%%%%%#%%%%%%%%%%%%%%#&&&&&&&&&#(%#,,(@.(,& &*( &#,,(&.(,& &*( &#,.(&.(,& &*( &(//&//& //@///&//@#/#@(/&@//@&//##//##&&&%###%%%%%%%%%%%###%%%#&&&&&&&&&&&(&@@%@@@(@@@#@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@.#.% @@@ &#&&&&%#%%%%%%#(%%%#%%%%%%%#%&&&&&&&&&&&#%&@@@@@@&@@@&@@@&@@@@@@&@@@&@@@&@@@@@@@@@@&@@.**.#  **. #   ... ... ..  .. .@/ #&&&&&%#%%%%#%&%#%(/(%%%%%%#%&&&&&&&&&&&&%#(@.(,& &*( &#,,(&.(,& &*( &(,.(&.(,& &*( &(//&//& //@///&//@#/#@//&@//@&//*,,*#&&&&%%%%#%&#(&%///##%%%%%#%&&&&&&&&&&&&&%/@@@(@@@(@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@&&&@,@&#(@// %%.,/@.#,%/******,/%%#%#%&%#@.@@@,@@&#%%%%#%&&&&&&&(**(%&&%#@@@@&@@@&@@@&@@@@@@&@@@&@@@&@@@@@@&@@@&@@.**.#  **. #   ... ... ..  .,/********/%%%#%#.@/ *@. #@ *#%%%##%&&%/,*******,*( (,% &*( &#,,(&.(,& &*( &(,.(&.(,& &,( &(//&//& //@///&//@#/#@//%@//@*,*******#%%%#/#//##//%///@///(%%%%(*,**************,/@@@(@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#(@// %%,,/@.(*,******(%%#/****.@@@ @@@,@@%(@@%%%%%****************,/@&@@@&@@@&@@@&@@&@@@&@@@&@@@&@@&@@@&@@.**.#  **. #   ... ... ...,,,****/%#*,,**,*% .@/ *@. #@  @%/#%%%(********,,,,,,,*.% &*( &(,,(& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%@/******#%#(/***##/&//(#//%///@///&/(#%%(****,,********,%/@@@(@@&%@@#@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,(*@#,**,/%%%#//,,,,#@@*@@@ @@@,@@%(@@/&(%%/*,*************,/@&@@@%@@@&@@@&@@&@@@&@@@&@@@&@@&@@@&@@.** #  **  #          #,**,,*///#//*,,,*( @%  @/ *@. #@  @%  (%(*,***************,* &,/ %(.,(& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%##(/*/////**,,(@///&//(#//%///@///&//#%%/***********,,,***/@@(@@&%@@#@@@(@@@(@@&%@@#@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,,(@.#,% @&&.@@@,@@%#@@*@@@ @@@,@@%///#%%#//#&/,,***,,,,,,,,,&&@@@%@@@&@@@&@@&@@@%@@@&@@@&@@&@@@%@@ ** #  **  #                   @/ *@. #@  @%  @/ *@. #@./*/////**(.% &,(*#@.,/& (.% &,/ %(.,/& (.& &,( &(,.(& (,& &,( &(//%//& //@///&//@#/(@//%@//@&//(#//%///@///&//(#//%///@%/*////*&@@/@@@(@@&%@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%\n",
        "\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@######@@@@@@,@@%(@@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@@*. ,##*.@** %**(* *%  *@ ,*# *%% /&# (@####%##%%%%%%%%###&,,/&**%#**@(**@/*/&**##**@(**@/*/&**#%**@(**@/*/&**#%**&#**@/@&#@#&#&#@%%#&&#%%##&###@###&##&&#%%@#&#&#%%%%%%%%%%%%%%##%#@@,@@% @@#,@@/(@@,&@& @@#,@@((@@,&@& @@#.@@((@@*&@& @@%.@@((@@@@@@@@@@*@@##@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%#((((#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*@***%  .@ . # **@*,#@*.@%* @(**********,/((#%%##%%%%(((((#(* .,,. *., * ,.* .,,. *., * ,.* .,,. *., * ,.* .,,. *., * ,.@,#@%@##&#&#@%%@.,##/ %*#.& /*@%%#&&##/((((((((((((((((((((##(##(%/#/@/#*&(#(##(%/#/@/#*&(#/##(%/#/@/#*&(#/#((#/#/&/#*&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%/((((((((((((#(((((((((%@,@@%(@@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@,(@#,,,,,@,,,%,,**,.# ,.@ , #.,(,./((((((((((((((##(((((((/, &, ,(, (*, @,. &, ,(, (*, &,. &, ,#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@&(*@(#(@*(%@#(((((((((((((((((((###((((#@#(#((%/#/@/#*&(#(#((%/#/@/#*&(#(#((%/#/@/#/&(#/#((#/#/@/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@(/((((((((((((((((((((((((##(#@,@@%(@@/@@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,(@%,,,,,@,,,%,,**,.# , @ , &/((((((((((((((((((((((((((/#,, &, ,(, (*, @,. &, ,(, (*, &,. &, ,#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@&(*@#((@#/(((((((((((((((((//////(((((((##(#((%/#/@/#/&(#(#((%/#/@/#/&(#(#((%/#/@/#/&/#(#((%/#/@/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@#((((((((((((((((((((((((((((((/((((((%(@@/@@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,(( %%,/(,,%,,,,  ,.. , ,((((((((((((((((((((((((((((((/((((/((((/. .,. ,,. ,,  ,, .,. ,,. ,,  ,, .,, ,,. ,,  ,, .,, ,,.(%%(#* %%@(&(&((@@(%@@(&/(/(((((((((((((((((((((((((((((((((((//(((/(@(((&((#%((&#((@(((@((#%((&#((@(((@((#%((&#((@(((@(@**@@@@@@@@@@@@@@@@@@@@#((((((((((((((((((((((((((((((((((/(((((/((((/@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@,// %%,/(,,%,,,,  ,.. *((/((((((((((((((((((((((/((((((((((((((((/(((/. ,,. ,,  ,, .,. ,,. ,,  ,, .,. ,,. ,,  ,, .,. ,,.(%%(#* %%@(&(&((@@(%@@(((/((((((((((((((((((((((/(((((((((((((((/(((/&(((&((#%((&#((@(((@((#%((&#((@(((@((#%((%#((@(((@(@**@@@@@@@@@@@@@@@@@@@%((/(((((((((((((((((((((/((/////(((((((((((((((@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@,@@%(@@/&@@,@@,// %%,//,,%,,,,  ,.. &((/((((((((((((((((((((/((////((///((((((((((((. ,,  ,,  ,, .,. ,,  ,,  ,, .,. .,. ,,  ,, .,. .,.(%%(#* #%@(&(&((@@(#@@((/(((((((((((((((((((((/((((((((((((((((((//((((((&((#%((&(((@(((&((#%((%#((@(((@((#%((%#((@(((@(@**&@@@@@@@@@@@@@@@@@&@#/((((((((((((((((((((///(((((((((((((((/(((((/@&.@@&*@&%#@&/&@&.@@&,@&%(@&/&@&,@@&,@&%(@&/&@&,@@,// %%,//,,%,,,,  ,.. , (((((((((((((((((((((/((((//(((((((((/((((((/&. .,  ,,  ,, .,. .,  ,,  ,, .,. .,  ,,  ,, .,. .,.(##(#* ##@(&(&((@@(#@@(&*/((((((((((((((((((((/((((((((((((((((((/((((((((/(#%((%(((@(((&((#%((%(((@(((@((#%((%#((@(((@(@@@&@@@@@@*@@%#@**.## **@/(((((((((((((((((((((/////((((((((///((((/((###((&@@&&@@&@@@&@@@&@@&&@@&@@@&@@@&@@&&@@&@@@&@@@.**.#. **. # . ... ... ..(((((((((((((((((((((((/(#####/((((((((((/(#####((,,(@.(,& &*( &#,,(&.(,& &*( &#*.(&.(*& &*( &#((&((& ((@(((&((@#(#@((&@(/((((((((((((((((((((((((#####(((((///((#######(%@@%@@@(@@@#@@&%@@%@@@(@@@#@@@%@@%@@@(@@@#@@@%@&@@@@&&@@,@&#(@*/ %#.,/@ #.% (/(((((((((((((((((((######(/(((//(######(#(@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ... ...... .@/ *(//(((((((((((((#######(/((/#########/&#,,(@.(,& &*( &#,,(&.(,& &*( &#,.(&.(,& &*( &(((&(/& ((@(((&((@#(#@((&@((@&((##((&(((@(((#(((((/(########(/((#######((@&%@@%@@@(@@@#@@&%@@%@@@(@@@#@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@.#.% @@@ @@@,@@%##/(((((/(#########(((##((((/(//#@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ... ...... .@/ /@. #@.,(((((((/(##########(########/(#((.,(@.(,& &*( &#,,(&.(,& &*( &#,.(&.(,& &*( &(//&//& //@///&//@#/#@(/&@//@&//##//&(//@/((((((((((##########(#########(((###/%&%%&%@#@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@.#.% @@@ @@@,@@&/((((((((/#############((########(####(%@@@@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#  **. # . ... ... ... .. .@/ *@. #%/((((((((((*(###########((#############(((//&*( &#,,(&.(,& &*( &(,.(&.(,& &*( &(//&//& //@///&//@#/#@//&@//@&//##//%(//((((((((((((/(//(#####((#%####################(#@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %%.,/@.#,% @@@ @@@(((((((((((((/((((((((/@&%%%%/#########(########//%@@@&@@@@@@&@@@&@@@&@@@@@@&@@@&@@.**.#  **. #   ... ... ..  .. .@/ *@#/(((((((((((/(((((((((..,&%((@/(#######/(####(*,*/#((.,(&.(,& &*( &(,.(&.(,& &,( &(//&//& //@///&//@#/#@//&@//@&//##//(((((((((/(((/%,,,,,,...*@@#@@@((########(((((((/(###(##(#@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#(@// %%,,/@.#,% @//(%((((((((((((/.#,......../@&@@@@@/(####((((((###//*****/((#(/%@@&@@@&@@@&@@@&@@&@@@&@@.**.#  **. #   ... ... ..  ..***,,,...*/(((((((, %,........*.,/@ (#(#///,****/((##(*********(##(.& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%@//@&//###*...........(/,,,........*&&#/**/###(****/,*(####(********/##(#@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#(@// %%,,/@.#,% @@@#...........,#/**......,*********(###****///(#(((#/********/%&&@@&@@@&@@@&@@@&@@&@@@&@@.**.#  **. #   ... ... ..  ..  @@*...........*@/ *#    ,**********#(/*****((###(/((/*******((& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%@//@&///*...........*%(#//%///@/(*****************/(#(//********/#@@#@@@(@@@(@@&%@@#@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,,(@.#,% @&,............(@@ @@@,@@%(@@/@&&&##%%/*****/(#(*********%@@@&@@@&@@&@@@%@@@&@@@&@@&@@@%@@ ** #  **  #                   &,  ...........*,(&@. #@  @%  ,/@ (.% @*/%/**********/%/ %(.,/& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/(@//%@//@&//(#/%%/(,.........//%///@///&/@@#@@@/@@@(@@&((#(*/%/@@@(@@&%@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%\n",
        "\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(*/*,*#@%(@@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@@*. ,##*.@** %**(* *%  *@ .*# *%% /&# (@/.#&,*%% /&# (#,,,,,,,,,,,*/*@(**@/*/&**##**@(**@/*/&**#%**@(**@/*/&**#%**&#**@/@&#@#&#&#@%%#&&#%%##&###@###&##&&#%%@#&#&#@%%#&&#%##*,,,,(*,(%%%%#*,*&,@@/(@@,&@% @@#,@@((@@,&@& @@#.@@((@@*&@& @@%.@@((@@@@@@@@@@*@@##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/(,/##(##/#*..,#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*@***%   @ . # **@*,#@*.@%* @(*******************,/(/,*%%%%##%##((,*., * ,.* .,,. *., * ,.* .,,. *., * ,.* .,,. *., * ,.@,#@%@##&#&#@%%@.,##/ %*#.& /*@%%#&&#%%@#&#&#@%%,(#/,,*%#//**//#%(*#/@/#*&(#/##(%/#/@/#*&(#/##(%/#/@/#*&(#/#((#/#/&/#*&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/#%%(,,,,/((#####%#*(@/@@@ @@@,@@%(@@/&@@.@@@,@@%(@@/&@@.@@@.@@&(@@/&@@.@@,(@#,,,,,@,,,%,,**,.# , @ , #.,(,,//,,(*,,#,(%%%%%%(,,,,,,,,,,,,,*#/#*, &,. &, ,(, (*, &,. &, .#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@%(*@(#(@*(%@%@@&&@@%@#(#%%%%%%%%%%%#(/*,,...,,/#%#/##*&(#(#((%/#/@/#*&(*##/(%/#/@/#/&(#/#((#/#/&/#/&/@**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#(#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%((@@@,@@%(@@/&//(///*//%(@@/&@@.@@@,@@%(@@/&@@.@@,(@%,,,,,@,,,%,,**,.# , @ , %.#((##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#((/////#%#(%%#.#, (*, &,. &, .#, (*, &,.@*%@####&###@##@//@&(*#(/((##%%%%%%%%%%%%%%%%%%######%%###%%%%%%%%######%%%%%%%%%%%#(((%%%((*((%/#/@/#/&/#/#((%/#/&/#/&/@**@@@@@@@@@@@@@@@@@@///((//(%%%%%%%%%%%%%%#################(##%%%%###%##%%%%%%%%%%%#((((%#(@@%(@@/&@@.@@@,@@%(@@/&@@.@@,/( %%,/(,,%,,,,  ,../(%%%(%#(%%%%%%%%%#%%########(//*****##########%####%%%(##(#%%%%%%(%#(,,  ,, .,, ,,. ,,  ,, .,, ,,.(%%(#* %%@(&(&((@@(##%%%(((%#((%%%%%%##%%%%################(/**(##%%##%#####(%%%(#%%%##%%##(%((&#((@(((@((#%((%#((@(((@(@**@@@@@@@@@@@@@@@@&(%%%%%(%%#%%%%%%%##%#############%%##%%%%#(#%#%%####%%((%##%%##%%(%%##%#@@%(@@/&@@.@@@,@@%(@@/&@@.@@,// %%,/(,,%,,,,  ,*(%%%%%#(#%%%#(################%/#%%%%%#####(#%%##%%##%%%%%%%%%(##%%%(%%(*  ,, .,. ,,. ,,  ,, .,. ,,.(%%(#* %%@(&(&((@@(*#%%%%##%###%%%##(#########(###%#%#%%(/##(##(#%%%%%%%%%########(%%%%(%%%#(/(%#((@(((@((#%((%#((@(((@(@**&@@@@@@@@@@@@@@@(%%%%%####%#(#%%%%#########((###%#%%((((##(#(##%%%%%%###((##(((#%%#(#%%%%%/%(@&/&@&.@@&,@@%(@&/&@&,@@,// %%,//,,%,,,,  %#%%%%%##%##%%#(%%%%#(######((((###/((#####(#(%#(((########(###%%%(%##%%%%%#*,, .,. .,. ,,  ,, .,. .,.(%%(#* #%@(&(&((@@&(%%%%%%#(%%%#%%%####%######%%&%###%%%%%%%##(##%%%%%%###(((#%%%%#%%#(###%%%%/%#((@(((@((#%((%#((@(((@(@**&@@@@@@@@@@@@@@@(%%%%%##%##%%%%%##%%%%%###(%%#%%%%#((##%%%%%(##%%%##(#((#%%%###%%%(#%%%(#%#,(@&/&@&,@@&,@&%(@&/&@&,@@,// %%,//,,%,,,,  ,*(%%%%(%%%%#%%%##((#%%%%%###%((#(#%%%%(%%%%#(#####%##%%%%%#(#%%%%(#%%%%%(%( ,, .,. .,  ,,  ,, .,. ., (##(#* ##@(&(&((@@(#&(#%%(%%%%%%%%%%%###(#%%%%%#(/(((#%%%%%%%%%###((((%%%%%%%#%%%%%#%%%%%%###%(%(((@(((&((#%((%#((@(((@(@@@&@@@@@@*@@%#@**.## ,#%##%%%%%%%%%%%######%%%%%%%%(/((/#%%%%%%%#%%%%%%&%%%%###%%%%%%%%%%%(%&&@@&@@@&@@@&@@&&@@&@@@&@@@.**.#. **. # . ... ... ..(##%%%%%%%%%%%%####(%%%%%%%%%%%((%%%%%%%#(%%%%%%%%%##%%%%%%%%%%#(,,(&.(,& &*( &#*.(&.(*& &*( &#((&((& ((@(((&((@#(#@((&@((@%#(##%%%%%##(((##%#%%%%%%%%%%%%%%%###%#%%%%%%%%(/&%((((((#%@&%@@%@@@(@@@#@@&%@@%@@@(@@@#@@@%@&&@@@&&&@,@&#(@*/ %#.,/@ #.% @@@ @@@*@@%#@&#%##(%%%%%%%%%%%%#%##(#(#%%%%%#(#@@@@@@@@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ... ...... .@/ /@, #@..@(%(##%##%%%%%%%%%%#(%&&#####%###%%#@.(,& &*( &#,,(&.(,& &*( &#,.(&.(,& &*( &(((&(/& ((@(((&((@#(#@((&@((@&((##((&(((@(((%#((%%%%%##%%%%%%%&%##%%%#(%#&##%%%%#(,@@@#@@&%@@%@@@(@@@#@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@ #.% @@@ @@@,@@%*#%(#%%%%%%%###(%%%%%#%%%%##(#%%#(#####&@@@@@@&@@@&@@@@@@@@@@&@@@&@@@@@@@@@@&@@.**.#. **. # . ... ... ... .. .@/ /@. #@.*%%%#%%%%%%%%%%####(#(%%%%#((###%%%#(/##,& &*( &#,,(&.(,& &*( &#,.(&.(,& &*( &(//&//& //@///&//@#/#@(/&@//@&//##//&(//@/##%%%#%%%%%%%%%%%%####%%##(#%%%#%%##%##@(@@@#@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@@%@&&@@@&&&@,@&#(@// %#.,/@.#.% @@@ @@@,@@%,((#%%%%%%%%%%%%%%#(##%#####(%%#%%%%%%#%@@&@@@&@@@&@@@@@@&@@@&@@@&@@@@@@@@@@&@@.**.#  **. #   ... ... ..  .. .@/ *@. #@######%%%%%%%%%%%%%####%%%%###(%%%%%%%%#(.& &*( &#,,(&.(,& &*( &(,.(&.(,& &*( &(//&//& //@///&//@#/#@//&@//@&//##//%///(#%(%%%%%%##%%%%%%%##/###%%%##(#%#%%%%%%%##@@@(@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@&&&@,@&#(@// %%.,/@.#,% @@@ @@@,##%%%%%%%##%%%%%%%#(&/@&(/(((##%%%%##%%%%%%(%&@@@&@@@&@@@@@@&@@@&@@@&@@@@@@&@@@&@@.**.#  **. #   ... ... ..  .. .@/ *@.,,,,,*#*,,(%%%%%%#/,@% .,/@,(%%%%%%%%(,./%(,,,.&*( &#,,(&.(,& &*( &(,.(&.(,& &,( &(//&//& //@///&//@#/#@//%@//@&//##//%,,,,,,,,,,,,,*#%#(%///&/@@#@@@(#%%#/,,,,,,,(,,,,@(@@&%@@%@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#(@// %%,,/@.#,% @@@ &*,,,,,,,,,,,,,,,/#@@%(@@/@&@@@@@&(,,,,,,,,,,,,,,,,&@&@@@&@@@&@@&@@@&@@@&@@@&@@&@@@&@@.**.#  **. #   ... ... ..  .. .@/ .,,,,,,,,,,,,,,,,.,#@  @% .,/@ (.&,,,,,,,,,,,,,,,,,,. &(,,(& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%@//@&//((,,,,,,,,,,,,,,,,,,///@///&/@@#@@@/@(.,,,,,,,,,,,,,,,,,%&%@@#@@@(@@@(@@&%@@%@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,,/@.#,% @%,.,,,,.,,,,,,,,,,,%@,@@%(@@/@&@@@&@@@*,,,,,,,,,..,,,.,/%@@@&@@@&@@&@@@&@@@&@@@&@@&@@@&@@.** #  **  #                   ,,,,,,,,,,,.,,,,,./@. #@  @%  ,/@ (.% *,,,,,.,,,,,,,,,,,.,(.,(& (,& &,( &(,.(& (,& &,( &(//&//& //@///&//@#/#@//%@//@%,,,,,,,,,,,,,,,,,,,//%///@///&/@@#@@@/@@@(,,,,,,,,,,,,,,,,,,,.%#@@@(@@@(@@&%@@#@@@(@@@(@@&%@&&@@@%&&@,@%#/@// %%,,(@.,,,,,,,,,,,,,,,,,,,,,* @@@,@@%(@@/@&@@@&@@&@(.,,,,,,,,,,,,,,,,,...*@@&@@&@@@%@@@&@@@&@@&@@@%@@ ** #  **  #               ,,...,,,,,,,,,,,,,.(/ *@. #@  @%  ,/@ (.% @*(....,,,,,,,,,,,......# (.& &,( &(,.(& (,& &,( &(//%//& //@///&//@#/(@//%@//@(*....,,,,,,,,,*(/(#//%///@///&/@@#@@@/@@@(@@&%@&/,,,.,,.,*(#&@@#@@@/@@@(@@&%@@#@@@/@@@(@@&%\n",
        "\n                                                                                                                                                                 .....,,,,,***,********////((((((#####%%%%%%%%/                                                              .@@@@@@@&@@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&#(((%&&&@@@@% .                                                           ,*@@&&&(,******(&&&&&&&&&&&&&&&&&&&&&&&&&&&,*********&&&&@&..                                                            #@&&%,*********,%&&&&&&&&&&&&&&&&&&&&&&&&%,*********(&&&&@*.                                                          . %@&&&**********/&&&&&&&&&&&&&&&&&&&&&&&&&&&#,****,*%&&&&&@#                                                             &@&&&&&&%(((#&&&&&&&&&&&%,*******/&&&&&&&&&&&&&&&&&&&&&&&@& ,                                                          .@@&&&&&&&&&&&&&&&&&&&&&#,**********&&&&&&&&&&&&&&&&&&&&&&&@*.                                                         .*@&&&&&&&&&&&&&&&&&&&&&&#,*********(&&&&&&&&&&&&&&&&&&&&&&&@%                                                           #@&&&&&&&&&&&&&&&&&&&&&&&&%/*****%&&&&&&&&&&&&&&&&&&&&&&&&&@& ,                                                       ..&@&&&&%*,*****/%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&(*,*,,/%&&&&&@/.                                                       ,*@&&&&************&&&&&&&&&&&&&&&&&&&&&&&&&&&&/**********#&&&@&                                                     .   (&&&&&/***********&&&&&&&&&&&&&&&&&&&&&&&&&&&&***********(&&&&@.,                                                ./((((.%&&&&&&&#*,**,,*#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%/*****,/%&&&&&&(,/*,.                                          /(((((//,&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&./(((((.                                    .///((////.(&&&&&&&&&&&&&&&&&&&&%&&%%%%%&&&&&&&&&&&%%%%%%%######((((///****, *//(((((.                              .,/((((///////,#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&./////*//(*                      ,/((((((((////////////*&&&&&&#.     ,%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&#,     ./&&&&&&#.////////(((/*.              (((((((///////////////////.%&&&&.%&&&&&%*  .%&&&&&&&&&&&&&&&&&&&&&&&&&&&%   /&&&&&&&(#&&&&**///////////(((((((((((*,.   (/////////////////////////*/&&&&&&&&&&&&&&&* .&&&&&&&&&&&&&&&&&&&&&&&&&. .%/#&@&((&&&&&&&& ,///////////////////(((((((((///////////////..,//////// .&&&&&&(&@@@@%. .(. #&&&&&&&&&&&&&&&&&&&&&%  .  (@@&@@@@/&&&&&%.*.///////,,////////////////////////////////./////,,//,,/,/&&&%#@@@*..,.      #&&&&&&&&&&&&&&&&&&&#          /@@@@/&&&&**/,,/, ,/////,//////////////////////////////./////////,.*/.&&&#@@@@&,        /./&&&&&&&&&&&&&&&&&# .        .%@@@@/&&&% ,.,/////////*,//////////////////////////////.*////////////,#&&#%@@@@@@(,...*%@@#(/%&&&&&&&&&&&&&,.(@@(,,.,/&@@@&%#(&&&#.//////////// ///////////////////////////////*,/////////////.&&&&&%#/#&@@@@@@@@@@%%&&%,*/(((*,&&&&/@@@@@@@&#*#&&&&&&&&&, ///////////,*////////////////////////////////./////////*  . &&&&&&&&&&*#&&&%##%&@#&,(((((((((*#&/&&##%&&&&*&&&%%%%&&&% .. *//////// ////////////////////////////(((((*.((////// ....*&&&%%%%%&&*%&&&&&&&&&&.(((((((((//&&&&&&&&&&&((&&&%%&&&&# ....*//////.//////////////////////////(((((* , .,(((///...... &&&&&&&&&#  ./%&&&&&&&&(*((((((*/&&&&&&&&&#,  ,(,/((/&&&*....,,////(*,(((///////////////////(((((/. .    ,.,(((//*....../&&&#((#%./%&&#,     .,,.  ##.  **,.     ,#&&(*.#&&&&&&& . ,*.*//((/  ,((((((((//////////((((/. #         ..,(((//.,*. . %&&&&&&&&&/(#@&#((%&&%###%&&&#(##%&&&%(#&@@//%&&&&&&&&(.***,,//((( .    . ,(((((((//////(, .*              .,(((//.,***,/&&&&&&&&&&&/%#&@@#@@@@@@@%*%@@@@@@#@@@%#@(%&&&&&&&&&&,,**.,//(((.*          . *((((((((                    .,(((//,.*** #&&&&&&&&/(&&(@@@#(%@@@@@@#@@@@@&(/&@@@/&&,(&&&&&&&&( *, ///(((..               , ./(((                    *.*(((///,.***,,,,,,,,,,.%&&%*/@@@@@@@@#@@@@@@@#@%(&&,.....,,,,,,,*,,,//(((,..                   * .                     * *(((///.,*************, #&&&&##@@@@&/@@@@@%/%&&% ,**************,.//(((*..                                             , *(((///.,*************, /./&&&&&&&&&&&&&&&&%,,#(.,***********,.///(((*.                                                 .*(((////*..,***,,. ,#%%%%%%/..,(%&&&%#*. /%%%%%%%#*..,,,,. ,////(((*.                                                   .*(((/////////*%%%%%%%%%%%%%%#/&&&&&&&(#%%%%%%%%%%%%%(*////////(((*.                                                     ..(((////////,%%%%%%%%%%%%%%%%%#*/(/%%%%%%%%%%%%%%%%*////////(((*.,                                                       .((((//////*(%%%%%%%%%%%%%%%%%%*%%%%//(((*(%%%%%%%.///////(((,,                                                         . (((//////**%%%%%%%%%%%%%%%%%%/%%#*((((((/#%%%%%#,//////(((.,                                                           / /((//////,%%%%%%%%%%%%%%%%%%/#%%*((((((*%%%%%%#*/////(((.,                                                               *(//////*#%%%%%%%%%%%%%%%%%/%%%%#(//(#%%%%%%%(//////(/. .                                                               ,,(//////*%%%%%%%%%%%%%%%%%/#%%%%%%%%%%%%%%%%///////*,/ .                                                             *((*.//////.%%%%%%%%%%%%%%%%%(#%%%%%#((#%%%%%%%*/////,*(/,.                                                           , (((/* /////*(%%%%%%%%%%%%%%%%(#%%#*((((((/#%%%%,////,*(((( ,                                                           /(((((/ /////,%%%%%%%%%%%%%%%%##%%#*#(((((#/%%%#,///.*//(((/                                                           ,//////// ////.#%%%%%%%%%%%%%%%#(%%%#**((/*(%%%%(///.*///////, .                                                       .//////////.*//**##############*..*##############*//.*///////// .                            \n"]
    def __init__(self, content, nick):
        self.content = content.decode('utf-8')
        self.timestamp = datetime.now().strftime("%H:%M")
        self.nick = "[" + " " * ((12 - len(nick)) // 2) + nick + " " * (12 - len(nick) - (12 - len(nick)) // 2) + "]"
    
    def getPretty(self):
        return " ".join([self.timestamp, self.nick, self.content]) + "\n"
    
    def sexy(self, arg : int):
        return " ".join([self.timestamp, self.nick, self.sex[arg - 1]]) + "\n"

if __name__ == "__main__":
    LocalServer = Server()
    LocalServer.set_up()
    LocalServer.start()
